# Настройка системы очков

Для корректной работы системы очков необходимо выполнить SQL скрипт в Supabase.

## Шаги:

1. Откройте Supabase Dashboard
2. Перейдите в раздел "SQL Editor"
3. Создайте новый запрос
4. Скопируйте и вставьте содержимое файла `add_points_system.sql`
5. Нажмите "Run" для выполнения

## Что делает скрипт:

1. Добавляет поле `points` в таблицу `profiles` для хранения накопленных очков пользователей
2. Создает функцию `update_partner_points` для атомарного обновления очков обоих партнеров (без параметра date_id)
3. Предоставляет права на выполнение функции аутентифицированным пользователям

## Логика начисления очков:

- **Создатель свидания** получает полные очки (1, 2 или 3 в зависимости от сложности)
- **Партнер** получает половину очков (0.5, 1 или 1.5, округляется вниз)
- Очки накапливаются в профиле пользователя и могут быть потрачены на призы

После выполнения скрипта система очков будет работать корректно.
